# 3D模型编辑功能指南

## 功能概述

本功能允许用户导入3D模型，在编辑器中进行编辑，修改模型的材质和变换属性，然后导出为GLTF格式。

## 使用流程

1. **导入模型**：
   - 在编辑器中选择或拖拽上传GLTF/GLB格式的3D模型文件
   - 模型将被加载到编辑器的3D场景中

2. **编辑模型**：
   - 选择模型，点击"编辑模型"按钮进入编辑模式
   - 单击模型的具体部件(Mesh)来选中它
   - 在右侧面板中修改选中部件的属性：
     - **材质属性**：颜色、透明度、金属度、粗糙度等
     - **变换属性**：位置(X/Y/Z)、旋转(X/Y/Z)、缩放(X/Y/Z)

3. **保存导出**：
   - 完成编辑后，点击"保存"按钮
   - 系统会自动将编辑后的模型导出为GLTF格式文件
   - 导出的文件会自动下载到本地

## 技术实现

整个功能基于以下核心组件实现：

1. **`ModelLoad`组件**：负责加载和渲染3D模型，接收配置参数并应用到模型上

2. **`config.vue`**：提供模型编辑界面，包含材质和变换属性的配置面板

3. **模型数据存储**：
   - 使用Pinia状态管理(`chartEditStore`)存储模型数据
   - 模型数据结构包含材质配置(`materials`)和变换配置(`transforms`)

4. **GLTF导出**：
   - 使用Three.js的`GLTFExporter`将编辑后的模型导出
   - 支持保存为标准GLTF格式

## 配置说明

模型配置数据结构：

```javascript
{
  // 材质配置，按模型元素UUID索引
  materials: {
    [uuid]: {
      color: '#ffffff',      // 颜色
      opacity: 1,            // 透明度 (0-1)
      metalness: 0,          // 金属度 (0-1)
      roughness: 0.5         // 粗糙度 (0-1)
    }
  },
  
  // 变换配置，按模型元素UUID索引
  transforms: {
    [uuid]: {
      position: { x: 0, y: 0, z: 0 },     // 位置
      rotation: { x: 0, y: 0, z: 0 },     // 旋转 (弧度)
      scale: { x: 1, y: 1, z: 1 }         // 缩放
    }
  }
}
``` 